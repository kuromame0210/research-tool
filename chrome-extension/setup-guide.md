# 🚀 メルカリリサーチツール セットアップガイド

## 📋 必要な作業

### 1. Chrome拡張機能のインストール

1. Chromeで `chrome://extensions/` を開く
2. 右上の「デベロッパーモード」をONにする
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. このフォルダ（chrome-extension）を選択
5. 拡張機能がインストールされたことを確認

### 2. Supabase設定

#### 2.1 Supabaseプロジェクト作成
1. [supabase.com](https://supabase.com) でアカウント作成
2. 新しいプロジェクトを作成
3. プロジェクト名とパスワードを設定

#### 2.2 データベースセットアップ
1. Supabase管理画面で「SQL Editor」を開く
2. `/Users/kurosawaryoufutoshi/Downloads/research-tool/all_in_one_setup.sql` の内容をコピー
3. SQL Editorに貼り付けて実行

#### 2.3 API設定取得
1. Supabase管理画面で「Settings」→「API」を開く
2. 以下の情報をコピー：
   - **Project URL** (例: https://xxx.supabase.co)
   - **anon public key** (eyJで始まる長い文字列)

### 3. Chrome拡張機能の設定

1. 拡張機能アイコンをクリック
2. 「設定」ボタンをクリック
3. 設定画面で以下を入力：
   - **Supabase URL**: 手順2.3で取得したProject URL
   - **Supabase Anon Key**: 手順2.3で取得したanon public key
   - **管理画面URL**: `http://localhost:3002` (ローカル環境の場合)
4. 「接続テスト」ボタンでテスト実行
5. 成功したら「設定を保存」

### 4. 管理画面の起動

```bash
cd /Users/kurosawaryoufutoshi/Downloads/research-tool/admin-panel
npm run dev
```

ブラウザで http://localhost:3002 にアクセス

## ✅ 動作確認

### 基本動作テスト
1. https://jp.mercari.com/search?keyword=iPhone にアクセス
2. 「リサーチボタン表示」をクリック
3. 各商品に「Amazon」「データ収集」ボタンが表示されることを確認

### データ収集テスト
1. 商品詳細ページに移動
2. 「データ収集」ボタンをクリック
3. 「収集完了」と表示されることを確認
4. 管理画面の「商品管理」で収集されたデータを確認

### 管理画面テスト
1. 拡張機能の「管理画面」ボタンをクリック
2. 管理画面が正常に表示されることを確認
3. 各機能（商品管理、フィルター管理など）の動作確認

## 🔧 トラブルシューティング

### よくある問題と解決方法

#### 1. 拡張機能が読み込まれない
- manifest.jsonの構文エラーをチェック
- 必要なファイル（特にlib/supabase-js.min.js）が存在するか確認
- Chromeの開発者ツールでエラーログを確認

#### 2. Supabase接続エラー
- URL/Anon Keyが正しいか再確認
- Supabaseプロジェクトが正常に動作しているか確認
- ネットワーク接続を確認

#### 3. メルカリページでボタンが表示されない
- ページを再読み込み
- Chromeの開発者ツールでコンソールエラーを確認
- メルカリサイトの構造が変更されている可能性

#### 4. データが保存されない
- Supabase接続設定を再確認
- データベーステーブルが正しく作成されているか確認
- 権限設定（RLS）に問題がないか確認

## 📊 機能説明

### Chrome拡張機能の機能
- **データ収集**: メルカリ商品情報の自動抽出・保存
- **Amazon検索**: 商品タイトルでAmazon検索を開く
- **管理画面連携**: ワンクリックで管理画面を開く
- **キーワードフィルタリング**: 不要な商品を自動除外
- **価格計算**: 利益率を考慮した出品価格の自動計算

### 管理画面の機能
- **商品管理**: 収集した商品データの表示・編集
- **フィルター管理**: 除外キーワードの設定
- **価格表管理**: 利益率設定と価格計算ルール
- **分析機能**: 売上・利益の可視化
- **CSV出力**: データのエクスポート

## 📝 次のステップ

1. 実際のメルカリページでテスト実行
2. 収集データの確認と調整
3. キーワードフィルターの設定
4. 価格計算ルールの調整
5. 本格運用の開始

## 🎯 運用のコツ

- **定期的なデータ確認**: 収集されたデータの品質をチェック
- **フィルターの調整**: 不要な商品を効率的に除外
- **価格設定の最適化**: 市場動向に合わせた価格計算ルールの調整
- **パフォーマンス監視**: 大量データ処理時の動作確認